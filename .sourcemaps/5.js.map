{"version":3,"sources":["../../src/pages/map/map.module.ts","../../src/pages/map/map.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MapPage } from './map';\n\n@NgModule({\n  declarations: [\n    MapPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MapPage),\n  ],\n})\nexport class MapPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Trees } from '../../providers/class/tree';\nimport { AppControllerProvider } from '../../providers/app-controller/app-controller';\n\n/**\n * Generated class for the MapPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-map',\n  templateUrl: 'map.html',\n})\nexport class MapPage {\n  trees: Array<Trees> = [];\n  link: string = \"./assets/imgs/map.png\";\n  xUser: number = 550;\n  yUser: number = 600;\n  title: string = \"Map\";\n  constructor(\n    public appController: AppControllerProvider,\n    public navCtrl: NavController, public navParams: NavParams) {\n    if (navParams.data[\"title\"]) this.title = navParams.get(\"title\");\n  }\n\n  ionViewDidLoad() {\n    this.getCollection();\n    this.getAllTree();\n    this.getLocation();\n  }\n\n  getAllTree() {\n    this.trees = this.appController.getTree();\n    // this.getRedTree();\n    console.log(\"treees\", this.trees);\n  }\n\n  getCollection() {\n    this.appController.getCollection(\"/map\").then((data) => {\n      console.log(\"Data :\", data);\n      this.link = data[0].link;\n    }).catch((err) => { });\n  }\n\n\n  getRedTree(): Array<Trees> {\n    if (this.trees && this.trees.length > 0) {\n      var redtrees = this.trees.filter(tree => {\n        return tree.status == 2;\n      });\n      return redtrees;\n    } else {\n      return [];\n    }\n  }\n  isFindPath: boolean = false;\n  findPath() {\n    this.isFindPath = true;\n    let array = this.getRedTree();\n    let result = [{ x: this.xUser, y: this.yUser }];\n    if (array.length > 0) {\n      for (let i = array.length - 1; i >= 0; i--) {\n        var min = 99999;\n        var index = 0;\n        for (let j = 0; j < array.length; j++) {\n          var distance = this.caculateDistance(result[result.length - 1].x, parseInt(array[j].left), result[result.length - 1].y, parseInt(array[j].top));\n          console.log(\"distance\", distance);\n\n          if (distance < min) {\n            min = distance;\n            index = j;\n          }\n        }\n        console.log(\"min\", min);\n        console.log(\"tree\", array[index]);\n        result.push({ x: parseInt(array[index].left), y: parseInt(array[index].top) });\n        array.splice(index, 1);\n      }\n      var point = \"\";\n      for (let z = 0; z < result.length; z++) {\n        if (z == result.length - 1) {\n          point += result[z].x + \" \" + result[z].y;\n        } else {\n          point += result[z].x + \" \" + result[z].y + \",\";\n        }\n      }\n      this.drawLine(point);\n    }\n  }\n\n  drawLine(point) {\n    let eline = document.getElementById(\"lineId\");\n    console.log(\"eline\", eline);\n\n    if (eline) {\n      console.log(\"eline\", eline);\n      var points = eline.getAttribute(\"points\");\n      // console.log(\"eline\",eline);\n      points = point;\n      eline.setAttribute(\"points\", points);\n    }\n  }\n\n\n\n  caculateDistance(x1, x2, y1, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  getLocation() {\n    var scrollLeft = this.xUser - (screen.width / 2);\n    var scrollTop = this.yUser - (screen.height / 2);\n    let element = document.getElementById(\"mapContainer\");\n    if(element)element.scrollTop = scrollTop;\n    this.appController.scrollController.doScrollLeft(\"mapContainer\", scrollLeft);\n  }\n\n  goToDetail(item){\n    console.log(\"item\",item);\n    \n    this.appController.showModal(\"DetailTreePage\",{item: item});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/map/map.ts"],"sourceRoot":""}